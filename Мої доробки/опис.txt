Вроде описания: 

При выходных 3 кВт средний потр. ток - ок. 12 А. Действующий - больше 20 А. Этот 
ток должен выдержать дроссель Др1 и реле. Указанное на схеме - слабовато. Брал 
подешевле, чтобы было не жалко, если сгорит. Параллельно С4 в трехфазном мосте 
нужно набрать 1000-1500 мкФ х 350В(для отладки можно 500-600) сглаживающих 
конденсаторов - по 220-330 мкФ; 
Последовательность включения: Контроллер меряет 300В на силовых конденсаторах 
и ждет, когда они зарядятся(через R1). Если не заряжаются хотя бы до 250 В - не 
подает ШИМ на драйвер. Это защита от просадки напряжения сети. 
(Вообще входная цепь, схема зарядки силовых конденсаторов и термозащита могут быть 
подобны сварочным - ммощность такая же.) 
Когда зарядились - включает реле. Стартует с малых оборотов и напряжения - 
делает плавный разгон двигателя. При резком разгоне пусковой ток двигателя может 
сжечь IGBT и тем более MOSFET. 

Драйвер: 
Токовая защита сделана на триггере - выв. 1-2 и 3-4 74HC04. Кгда напряжение на 
шунтовом рез. превысит предел, VI1 в схеме драйвера откроется и сбросит триггер. 
С него на входы SD драйверов пойдет лог. 0 - это запрет выхода. Все 6 
транзисторов моста закрываются. Чтобы снова выставить триггер, контроллер 
должен дать несколько прямоугольных импульсов на "сброс защиты" Достаточно 
длительности 0.5-1 мкс. Но как это работает, я еще не пробовал. 
Для зарядки бустрепных конденсаторов драйверов необходимо, чтобы на выходе 
полумостов были просечки хотя бы по 1-2 мкс(т. е. 48-49 мкс включен верхний 
транзистор и min 1-2 мкс - нижний). 3 буфера 74HC04 инвертируют сигнал ШИМ, 
поэтому на выходе контроллера, наоборот, должны быть импульсы min 1-2 мкс. 
Нижние транзисторы моста могут быть открыты неограниченное время. 
Драйвера боятся отрицательного напряжения на выходах(вроде, до 5 В). 
Для борьбы с ним стоят защитные диоды, и между выв. драйвера 5(LO) и 4(COM) 
тоже не вредно поставить, напр, 1N5817. 
Это делается против выбросов отр. напряжения, которые возникают при большом 
токе во время закрывания нижних IGBT, на индуктивности минусового провода 
между эмиттерами IGBT и выводами COM драйверов. От этого выброса драйвер 
может защелкнуться, как тиристор. При хорошем источнике 12 В он просто сгорит. 
Это так IR пишет, я сам не видел. 
Еще один способ борьбы с плохим монтажем - синфазный дроссель. Берется 2 
провода МГТФ, можно скрутить, и мотается 5-10 витков на кольце, напр, К10/6/4,5 
2000 феррита. С одной стороны - к выв. 6,7 драйвера, с другой - к затвору и 
эмиттеру верхнего IGBT. Нижний транзистор - так же: С одной стороны дроссель 
идет к выв. 5,4, с другой - к затвору и 
эмиттеру нижнего IGBT. Получаем 6 дросселей. Главное - не переборщить с 
витками, а то бустрепная емкость будет плохо заряжаться. 
Контроллер: 
Выдает ШИМом синус с 15 % 3 гармоникой. Благодаря этому амплитуда фазного 
напряжения(между выходами) приближается к амплитуде питающей сети. Таблица 
синуса записана в программной памяти, полный период, имеет 390 значений - для 
того, чтобы, перебирая их с частотой 20 кГц, иметь частоту синуса примерно 
50 Гц. Для трех фаз сделано 3 2-байтных указателя, которые перемещаются по ней 
со сдвигом в 130 шагов - то есть 1/3 периода. Когда надо сделать шаг, выборки 
синуса считываются по адресам в указателях, и эти адреса соответственно 
инкрементируются. Когда один из указателей дойдет до конца таблицы, он 
переводится в ее начало, а остальные два соответственно переписываются. 
3 гармоника на двигатель не попадает, поскольку он питается линейными напряжениями. 
Двигатель должен быть перекоммутирован со звезды на треугольник. Мост питается 
пульсирующим напряжением со сглаживающих конденсаторов. Для подавления этих 
пульсаций в выходном напряжении исп. умножение текущего ШИМ на функцию 1/x от 
питающего напряжения. Контроллер измеряет это напряжение при помощи АЦП через 
делитель, подключенный к выв. 24. 
Функция 1/x табличная, умножение аппаратное, арифметика однобайтная. Дешево и 
сердито. А главное, достаточно быстро. Ну а точность выше, чем в атмеловском 
примере. 
Похожим образом регулируется и амплитуда выходного напряжения. Когда на 
выходах контроллера импульсы одинаковые, - напр. меандр - на двигателе - ноль. 

Проще всего задавать обороты, поцепив потенциометр на один из входов АЦП. 
Что касается реализации переменной частоты, - исп. т. н. прямой синтез: 
Берется двухбайтный накопительный регистр, и при каждом прерывании таймера1 
(20 кГц) к нему прибавляется значение регистра частоты - напр. 100 - это соотв. 
50 Гц. Потом идет проверка накопительного регистра. Если число в нем не меньше 
100, то 
1) от накопительного регистра отнимают 100 
2) делается один шаг по таблице, как описано выше. 
3) возвращается снова на проверку. 
Таким образом, если в регистре частоты 100, при каждом прерывании таймера1 
выполняется 1 шаг, что соответствует 20000/390=51,3 Гц синуса. 
Если же, например, в регистре частоты 150, то в накопительном регистре будет: 
1) сначала - 0 . 
2) Прерывание. 0+150=150 
3) 150-100=50, 1 шаг 
4) Прерывание. 50+150 = 200, 
5) 200-100=100 - 1 шаг 
6) 100-100=100 - еще 1 шаг 
и т. д. То есть контроллер на прерывание будет делать то 1, то 2 шага. Хромая 
таким образом, он все-таки выдаст довольно чистый синус с частотой, в 1.5 раза 
большей, чем раньше. Поскольку регистр частоты 1-байтный, можно получить 
примерно 50*255/100=127,5 Гц. При этом, кстати, сильно падает момент двигателя, 
ибо поднять напряжение в 2.5 раза нечем. Да и транзисторы не выдержат. 
Минимальная частота будет, если в регистре частоты - 1. Получим 50*1/100=0,5 Гц. 

Как поднимается напряжение с частотой, думаю, понятно: 
Чтобы вычисить масштабирующий коэф. для синуса, к числу в регистре частоты 
прибавляется некое мин. число (около 5-10). Оно определяет напряжение на выходе 
при частоте =0. Потом берется 1/x от последнего рез. оцифрения напр. питания. 
Эти два числа умножаются, а рез. умножения еще раз умножается на константу - для 
приведения к нужному диапазону(вроде, 0-253). Масштабирующий коэфициент получен. 
Потом выборки синуса трех фаз умножаются на него и выводятся в регистры ШИМ. 

напряжение на выходе при частоте = 0 - это падение на активном сопротивлении 
статорных обмоток, когда по ним идет номинальный ток. Для разных двигателей оно 
разное, по-моему, для 3 кВт - 2-3% максимума. Да и сопротивление меди с 
температурой растет на 0.39% на градус. 50 градусов дадут почти 20%. 
Один предлагал подавать мин. напряжение 20% максимума - при 0.5 Гц так можно 
сжечь мотор, ведь его статор зайдет при этом в насыщение, и ток будет 5-10 
номиналов. 
Предупреждаю еще раз, я эту штуку еще не запускал целиком, а горят эти вещи на раз. 
Полезно при отладке запитать мост сначала от пониженного напряжения 30-50 В. 
Не так быстро сгорит. Вместо зарядной схемы полезно использовать ЛАТР на 10 А. 
Только развязки у него нету.